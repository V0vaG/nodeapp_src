<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Register</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="form-container">
    <h2>Register</h2>
    <form method="post" action="/register">
      <div th:if="${error}" class="error" th:text="${error}"></div>

      <input type="text" name="username" placeholder="Username" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="text" name="firstName" placeholder="First Name" required>
      <input type="text" name="lastName" placeholder="Last Name" required>
      <input type="number" name="age" placeholder="Age" min="0" max="120" required>
      <input type="text" name="address" placeholder="Address" required>

      <input type="password" id="password" name="password" placeholder="Password" required>
      <input type="password" id="confirmPassword" placeholder="Confirm Password" required>

      <div id="passwordMatchMessage" class="password-match"></div>

      <button type="submit" id="submitBtn" disabled>Register</button>
    </form>
    <p class="alt-link">Already have an account? <a href="/login">Login here</a></p>
  </div>

  <script>
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    const message = document.getElementById('passwordMatchMessage');
    const submitBtn = document.getElementById('submitBtn');

    function checkPasswords() {
      if (password.value === "" || confirmPassword.value === "") {
        message.textContent = "";
        submitBtn.disabled = true;
        return;
      }

      if (password.value === confirmPassword.value) {
        message.textContent = "✔ Passwords match";
        message.className = "password-match match";
        submitBtn.disabled = false;
      } else {
        message.textContent = "✖ Passwords do not match";
        message.className = "password-match mismatch";
        submitBtn.disabled = true;
      }
    }

    password.addEventListener('input', checkPasswords);
    confirmPassword.addEventListener('input', checkPasswords);
  </script>
</body>
</html>
